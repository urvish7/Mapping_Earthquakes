<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet-Basic-Map</title>
    <!-- Leaflet CSS -->
   <!-- <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
    integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
    crossorigin=""/>
   -->

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/>
     <!-- Make sure you put this AFTER Leaflet's CSS -->
    <!--
        <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
    integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
    crossorigin=""></script>

    -->    

        <!-- Our CSS -->
    <link rel="stylesheet" type="text/css" href="../Simple_Map/static/css/style.css">

    <!-- d3 JavaScript -->
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
  <h1> testing </h1>


    <!-- The div that holds our map -->
    <div id="mapid">
        
    </div>

    <!-- testing-->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>
     <!-- API key -->
     <script type="text/javascript" src="../Simple_Map/static/js/config.js"></script>
     <!-- Our JavaScript -->
     <script type="text/javascript" src="../Simple_Map/static/js/logic.js"></script>

     <!--our Cities.js calling-->
     <script type="text/javascript" src="../Mapping_Single_Points/static/js/cities.js"></script>



        
    <script>

       // let map = L.map('mapid').setView([40.7, -94.5], 4);
      //  var map = L.map('mapid').setView([36.1733, -120.1794],7);
        // Create the map object with center at the San Francisco airport.
        //let map = L.map('mapid').setView([37.6213, -122.3790], 5);
        // Create the map object with center at the San Francisco airport.
       // let map = L.map('mapid').setView([37.5, -122.5], 10);
       // Create the map object with center and zoom level.
        let map = L.map('mapid').setView([30, 30], 2);
                   // Coordinates for each point to be used in the line.
        // Coordinates for each point to be used in the polyline.
        let line = [
        [33.9416, -118.4085],
        [37.6213, -122.3790],
        [40.7899, -111.9791],
        [47.4502, -122.3088]
        ];

        // Create a polyline using the line coordinates and make the line red.
        L.polyline(line, {
        color: "yellow"
        }).addTo(map);
            

    //     L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}', {
    //     maxZoom: 19,
    //    // attribution: '© OpenStreetMap'
    //     }).addTo(map);
    // We create the dark view tile layer that will be an option for our map.
        let dark = L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/dark-v10/tiles/{z}/{x}/{y}?access_token={accessToken}', {       
        attribution: 'Map data © <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery (c) <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            accessToken: API_KEY
        });

    // We create the tile layer that will be the background of our map.
        let streets = L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
        maxZoom: 18,
        //id: 'mapbox/streets-v11',
       // id: 'mapbox/outdoors-v11',
        //id: 'mapbox/light-v10',
        //id: 'mapbox/dark-v10',
        //id: 'mapbox/satellite-v9',
        id: 'mapbox/satellite-streets-v11',
       // tileSize: 512,
        //zoomOffset: -1,
        accessToken: API_KEY
        // Accessing the airport GeoJSON URL
        let airportData = "https://raw.githubusercontent.com/urvish7/Mapping_Earthquakes/main/majorAirports.json";
    });
    
    // Then we add our 'graymap' tile layer to the map.
    streets.addTo(map);

    </script>

    <script>
        //  Add a marker to the map for Los Angeles, California.
        //let marker = L.marker([34.0522, -118.2437]).addTo(map);
        //let cities = L.marker([34.0522, -118.2437]).addTo(map);
        





         // Get data from cities.js
        let cityData = cities;

        // Loop through the cities array and create one marker for each city.
        cityData.forEach(function(city) {
        console.log(city)
        });


       // Loop through the cities array and create one marker for each city.
        cityData.forEach(function(city) {
            console.log(city)
            //L.marker(city.location).addTo(map)
            L.circleMarker(city.location, {
                radius: city.population/100000
            })
            .bindPopup("<h2>" + city.city + ", " + city.state + "</h2> <hr> <h3>Population " + city.population + "</h3>")
            .addTo(map);
        });
    
        // Add GeoJSON data.
        let sanFranAirport =
        {"type":"FeatureCollection","features":[{
            "type":"Feature",
            "properties":{
                "id":"3469",
                "name":"San Francisco International Airport",
                "city":"San Francisco",
                "country":"United States",
                "faa":"SFO",
                "icao":"KSFO",
                "alt":"13",
                "tz-offset":"-8",
                "dst":"A",
                "tz":"America/Los_Angeles"},
                "geometry":{
                    "type":"Point",
                    "coordinates":[-122.375,37.61899948120117]}}
        ]};

        // Grabbing our GeoJSON data.
        L.geoJSON(sanFranAirport).addTo(map);
        // L.geoJson(data,{
        // pointToLayer: function(feature, latlng) {
        // return L.marker(latlng);
        //     }
        // });

        L.geoJSON(data, {
        onEachFeature: function(feature, layer) {
        layer.bindPopup();
            }
        });


            
        // Grabbing our GeoJSON data.
        L.geoJSON(sanFranAirport, {
            // We turn each feature into a marker on the map.
            pointToLayer: function(feature, latlng) {
            console.log(feature);
            return L.marker(latlng)
            // adding the popup maker
            .bindPopup("<h2>" + feature.properties.city + "</h2>");
            }

  }).addTo(map);

        // L.circle([34.0522, -118.2437], {
        // radius: 100
        // }).addTo(map);
       // L.circleMarker([34.0522, -118.2437]).addTo(map);

    </script>

   

        
    
</body>
</html>